<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Document</title>
  </head>
  <body>
    <script>
      // 作用域: 变量可以起作用的区域
      //          变量声明定义好了, 可以在哪些范围内来使用, 作用域来决定的.

      //  全局作用域, 和 函数作用域(在js中, 只有函数可以形成作用域)
      //    ES6中, 有块级作用域.

      // 注意点: 函数作用域在函数声明定义的时候(就是说把函数写好了), 其作用域就已经确定下来了.

      /*function fn(){
            var num = 10;

            function foo(){

                function bar(){

                }

            }
        }
        console.log(num);
    */

      // 作用域链: 函数可以形成作用域, 函数嵌套在另外一个函数中,外层函数也有自己的作用域, 这样从里到外, 直到全局作用域, 这样形成的链式结构, 称为作用域链.

      // 对于每一个函数作用域链来说, 都是从当前函数作用域出发, 从里到外, 形成的链式结构

      // bar函数作用域链:
      //    bar 函数作用域 ==> foo 函数作用域 ==> fn 函数作用域 ==> 全局作用域

      // foo 函数作用域链:
      //    foo 函数作用域 ==> fn 函数作用域 ==> 全局作用域

      // 变量的搜索原则
      //  1. 首先在当前作用域中来查看是否有声明该变量, 如果有就返回变量的值
      //  2. 如果没有, 去外层作用域中来查找, 如果有就返回变量的值
      //  3. 如果也没有, 沿着当前的作用域链继续往外找, 直到 全局作用域, , 如果有就返回变量的值
      //  4. 如果还没有, 报错.
      //  简记: 沿着作用域链来查找

      var num = 8888
      function fn() {
        function foo() {
          var num

          function bar() {
            console.log(num)
          }
          bar()
        }
        foo()
      }
      fn()
    </script>
  </body>
</html>
